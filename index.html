<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OC命运生成器</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="bg-grid"></div>
    <div class="side-rain side-rain-left" id="sideRainLeft" aria-hidden="true"></div>
    <div class="side-rain side-rain-right" id="sideRainRight" aria-hidden="true"></div>
    <main class="shell">
      <header class="hero panel">
        <div class="section-head">
          <div>
            <p class="kicker">WORLD FORGE // OC FATE GENERATOR</p>
            <h1>OC命运生成器</h1>
            <p class="muted">左侧选轴，右侧即时解释。至少选 3 项即可生成；若包含 F/X/T/G 会自动升级为完整时间线骨架。</p>
          </div>
          <label class="theme-picker">
            主题色
            <select id="themeSelect">
              <option value="cyan">霓虹蓝（默认）</option>
              <option value="green">酸性绿</option>
              <option value="yellow">电光黄</option>
              <option value="pink">赛博粉</option>
              <option value="red">警戒红</option>
              <option value="purple">虚空紫</option>
              <option value="orange">熔核橙</option>
            </select>
          </label>
        </div>
      </header>

      <div class="layout">
        <section class="panel left">
          <div class="section-head">
            <h2>轴选择面板</h2>
            <span class="chip">内置模型：MiniMax-M2.5</span>
          </div>

          <div class="row-actions top-gap">
            <span id="selectedCount" class="chip">已选 0 项</span>
            <span id="modeBadge" class="chip">模式：开场静态</span>
            <button id="clearBtn" type="button" class="ghost">清空当前选择</button>
          </div>
          <div id="axisContainer" class="axis-container"></div>

          <h2 class="top-gap">补充偏好（可选）</h2>
          <details class="prompt-guide">
            <summary>不知道写什么？展开查看可用提示词类别</summary>
            <p class="muted">你不需要全写，挑最在意的 3~6 条即可。越具体，生成越贴脸。</p>
            <ul>
              <li><strong>男主基础信息：</strong>年龄段、身高体型、五官特征、穿衣风格、标志物（耳钉/纹身/眼镜等）。</li>
              <li><strong>外貌细节：</strong>伤疤/旧伤、手部特征、气味、声音质地、是否有非人特征。</li>
              <li><strong>情感与亲密史：</strong>是否有前任、是否有刻骨旧爱、情感经验（白纸/熟手）、性经验（处男/非处男/不适用）。</li>
              <li><strong>关系边界：</strong>可接受/不可接受的亲密行为，嫉妒阈值，占有欲强度，沟通偏好（直说/迂回）。</li>
              <li><strong>权力与互动手感：</strong>谁更主动、谁更掌控、拉扯强度、冲突风格（冷战/爆发/理性谈判）。</li>
              <li><strong>世界与现实约束：</strong>时代背景、阶层差、法律/家族压力、地理环境（城市/边境/废土）。</li>
              <li><strong>叙事语气（文本层，不等于调色板）：</strong>甜/虐比例、节奏快慢、句式密度、情绪强度（克制/浓烈）。若与调色板冲突：调色板决定“世界观与镜头美学”，叙事语气决定“文字表达手感”。</li>
              <li><strong>冲突可和谐示例：</strong>调色板选「赛博美学」（冷色霓虹、疏离城市）+ 叙事语气选「克制温柔、慢节奏」。结果可呈现为：外部世界冷硬，但人物内心与关系推进是安静且细腻的。</li>
              <li><strong>内容边界（强烈建议写）：</strong>明确雷区与禁写项（如：不要PUA美化、不要怀孕线、不要暴力描写等）。</li>
              <li><strong>开场镜头偏好：</strong>时间（清晨/雨夜）、天气、地点（医院/酒吧/战场）、第一句台词风格。</li>
            </ul>
          </details>
          <label>
            风格/限制
            <textarea id="extraPrompt" rows="5" placeholder="例：男主27岁，非处男但长期情感封闭；右手虎口有旧伤；声音偏低哑。关系上他外冷内热、占有欲中高，但明确尊重边界。世界是近未来海港城，雨夜开场，避免PUA美化与过度暴力。"></textarea>
          </label>

          <div class="actions">
            <button id="generateBtn" type="button">生成初始剧本</button>
            <button id="regenBtn" type="button" class="ghost">重新生成</button>
            <button id="clearBtnBottom" type="button" class="ghost">清空当前选择</button>
          </div>

          <div class="result-panel">
            <div class="section-head">
              <h2>生成结果</h2>
              <button id="copyBtn" type="button" class="ghost">一键复制</button>
            </div>
            <p id="status" class="muted">等待生成…</p>
            <article id="result" class="result"></article>
          </div>
        </section>

        <aside class="panel right" id="insightPanel">
          <div class="section-head">
            <h2>你选中的要素动态解释</h2>
          </div>
          <article id="selectedExplain" class="selected-explain selected-explain-live"></article>

          <div class="section-head top-gap">
            <h2>设计原则（静态）</h2>
          </div>
          <article class="selected-explain selected-explain-static">
            <section class="explain-card">
              <h4>① 轴是自由组合，不是必选题</h4>
              <p>至少选 3 项即可；不需要每个轴都选。你选的不是“正确答案”，而是你要的关系张力。</p>
            </section>
            <section class="explain-card">
              <h4>② 同样输入也可能生成不同男主</h4>
              <p>同样的轴选择与补充提示词，也可能产生完全不同但都自洽的男主。本工具每次只给出其中一种高完成度可能性。</p>
            </section>
            <section class="explain-card">
              <h4>③ 是否展开时间线取决于终局相关轴</h4>
              <p>若未选择 F/X/T/G 等终局相关轴，默认只生成开场静态态；若已选择，则自动升级为“时间线完整、细节留白”的骨架剧本。</p>
            </section>
          </article>
        </aside>
      </div>
    </main>

    <button id="mobileInsightToggle" class="mobile-toggle">查看解释面板</button>
    <script src="./app.js"></script>
  </body>
</html>
