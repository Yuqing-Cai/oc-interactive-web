<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OC命运生成器</title>
    <link rel="stylesheet" href="./styles.v5.css" />
  </head>
  <body>
    <div class="bg-grid"></div>
    <main class="shell">
      <header class="hero panel">
        <div class="section-head">
          <div>
            <p class="kicker">WORLD FORGE // OC FATE GENERATOR</p>
            <h1>OC命运生成器</h1>
            <p class="muted">左侧选轴，右侧即时解释。至少选 3 项即可生成；若包含 F/X/T/G 会自动升级为完整时间线骨架。</p>
          </div>
          <label class="theme-picker">
            主题色
            <select id="themeSelect">
              <option value="cyan">霓虹蓝（默认）</option>
              <option value="green">酸性绿</option>
              <option value="yellow">电光黄</option>
              <option value="pink">赛博粉</option>
              <option value="red">警戒红</option>
              <option value="purple">虚空紫</option>
              <option value="orange">熔核橙</option>
            </select>
          </label>
        </div>
      </header>

      <div class="layout">
        <section class="panel left">
          <div class="section-head">
            <h2>连接配置</h2>
          </div>
          <div class="config-grid">
            <label>Worker API 地址<input id="apiUrl" type="url" placeholder="https://xxx.workers.dev/generate" /></label>
            <label>模型名<input id="model" type="text" value="MiniMax-M2.5" /></label>
          </div>

          <div class="section-head top-gap">
            <h2>轴选择面板</h2>
            <div class="row-actions">
              <span id="selectedCount" class="chip">已选 0 项</span>
              <span id="modeBadge" class="chip">模式：开场静态</span>
              <button id="clearBtn" type="button" class="ghost">清空</button>
            </div>
          </div>
          <div id="axisContainer" class="axis-container"></div>

          <h2 class="top-gap">补充偏好（可选）</h2>
          <label>
            风格/限制
            <textarea id="extraPrompt" rows="3" placeholder="例如：男主更强势；开场要有压迫感；避免过长抒情。"></textarea>
          </label>

          <div class="actions">
            <button id="generateBtn" type="button">生成初始剧本</button>
            <button id="regenBtn" type="button" class="ghost">重新生成</button>
          </div>

          <div class="result-panel">
            <div class="section-head">
              <h2>生成结果</h2>
              <button id="copyBtn" type="button" class="ghost">一键复制</button>
            </div>
            <p id="status" class="muted">等待生成…</p>
            <article id="result" class="result"></article>
          </div>
        </section>

        <aside class="panel right" id="insightPanel">
          <div class="section-head">
            <h2>你选中的要素动态解释</h2>
          </div>
          <article id="selectedExplain" class="selected-explain selected-explain-live"></article>

          <div class="section-head top-gap">
            <h2>设计原则（静态）</h2>
          </div>
          <article class="selected-explain selected-explain-static">
            <section class="explain-card">
              <h4>① 轴是自由组合，不是必选题</h4>
              <p>至少选 3 项即可；不需要每个轴都选。你选的不是“正确答案”，而是你要的关系张力。</p>
            </section>
            <section class="explain-card">
              <h4>② 同样输入也可能生成不同男主</h4>
              <p>同样的轴选择与补充提示词，也可能产生完全不同但都自洽的男主。本工具每次只给出其中一种高完成度可能性。</p>
            </section>
            <section class="explain-card">
              <h4>③ 是否展开时间线取决于终局相关轴</h4>
              <p>若未选择 F/X/T/G 等终局相关轴，默认只生成开场静态态；若已选择，则自动升级为“时间线完整、细节留白”的骨架剧本。</p>
            </section>
          </article>
        </aside>
      </div>
    </main>

    <button id="mobileInsightToggle" class="mobile-toggle">查看解释面板</button>
    <script src="./app.v5.js"></script>
  </body>
</html>
