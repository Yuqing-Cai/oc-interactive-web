:root {
  font-family: "Inter", "PingFang SC", "Microsoft YaHei", system-ui, sans-serif;
  --bg: #090b12;
  --bg-accent: #1a1040;
  --text: #eef2ff;
  --muted: #c3cad8;
  --neon: #00e7ff;
  --grad-a: #2a4dff;
  --grad-b: #8b39ff;

  /* Derived global surfaces (neutral base, avoid blue lock-in) */
  --panel: color-mix(in srgb, #0f1014 52%, var(--bg-accent) 48%);
  --line: color-mix(in srgb, #6b7280 18%, var(--neon) 82%);
  --soft-line: color-mix(in srgb, #4b5563 24%, var(--neon) 76%);
  --input-bg: color-mix(in srgb, #0f1115 45%, var(--bg-accent) 55%);
  --chip-bg: color-mix(in srgb, transparent 76%, var(--neon) 24%);
  --chip-text: color-mix(in srgb, #f3f4f6 62%, var(--neon) 38%);
  --card-bg: color-mix(in srgb, #101216 50%, var(--bg-accent) 50%);
  --card-tint: color-mix(in srgb, transparent 80%, var(--neon) 20%);
  --focus-ring: color-mix(in srgb, transparent 58%, var(--neon) 42%);
  --status-ok: var(--muted);
  --status-error: #ff7b7b;
}

* { box-sizing: border-box; }
body {
  margin: 0;
  color: var(--text);
  background: radial-gradient(circle at 20% 10%, var(--bg-accent) 0%, var(--bg) 42%);
}
.bg-grid {
  position: fixed;
  inset: 0;
  background-image:
    linear-gradient(color-mix(in srgb, var(--neon), transparent 92%) 1px, transparent 1px),
    linear-gradient(90deg, color-mix(in srgb, var(--neon), transparent 92%) 1px, transparent 1px);
  background-size: 26px 26px;
  pointer-events: none;
}
.shell { max-width: 1460px; margin: 0 auto; padding: 16px; position: relative; }
.panel {
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: 16px;
  backdrop-filter: blur(8px);
  box-shadow:
    0 0 0 1px color-mix(in srgb, transparent 82%, var(--neon) 18%),
    0 10px 30px rgba(0, 0, 0, 0.4);
}
.hero { padding: 18px; margin-bottom: 14px; }
.kicker { color: var(--neon); letter-spacing: .1em; font-size: 12px; }
.muted { color: var(--muted); }
.layout { display: grid; grid-template-columns: minmax(420px, 1fr) minmax(350px, .9fr); gap: 14px; }
.left, .right { padding: 14px; }
.right { position: sticky; top: 12px; height: calc(100vh - 28px); overflow: auto; }
.section-head { display: flex; justify-content: space-between; gap: 8px; align-items: center; }
.row-actions { display: flex; gap: 8px; align-items: center; }
.top-gap { margin-top: 14px; }

.chip {
  border: 1px solid var(--line);
  background: var(--chip-bg);
  border-radius: 999px;
  padding: 4px 10px;
  color: var(--chip-text);
  font-size: 12px;
}

.config-grid { display: grid; grid-template-columns: 1fr 220px; gap: 10px; }
label { display: grid; gap: 6px; font-size: 13px; margin-top: 8px; }
input, textarea, button, select {
  background: var(--input-bg);
  border: 1px solid var(--line);
  color: var(--text);
  border-radius: 10px;
  padding: 10px;
  font-size: 14px;
}
input[type='checkbox'] { accent-color: var(--neon); }
button {
  cursor: pointer;
  border: 1px solid transparent;
  background: linear-gradient(90deg, var(--grad-a), var(--grad-b));
  font-weight: 600;
}
button.ghost {
  background: color-mix(in srgb, transparent 84%, var(--neon) 16%);
  border: 1px solid var(--line);
}

.axis-container { display: grid; gap: 10px; margin-top: 8px; }
.axis-group {
  border: 1px solid var(--soft-line);
  border-radius: 12px;
  padding: 10px;
  background: color-mix(in srgb, var(--card-bg), transparent 8%);
}
.axis-group.active-axis { box-shadow: 0 0 0 1px var(--focus-ring) inset; }
.axis-head { display: flex; justify-content: space-between; align-items: center; }
.axis-desc { margin: 8px 0 2px; color: color-mix(in srgb, var(--text) 72%, var(--neon) 28%); font-size: 13px; line-height: 1.5; }
.options { display: grid; grid-template-columns: repeat(auto-fill, minmax(175px, 1fr)); gap: 6px; margin-top: 8px; }
.option-item {
  display: grid;
  gap: 4px;
  border: 1px solid var(--soft-line);
  border-radius: 8px;
  padding: 8px;
  font-size: 13px;
  background: color-mix(in srgb, transparent 90%, var(--neon) 10%);
}
.option-desc { color: color-mix(in srgb, var(--muted) 86%, var(--neon) 14%); font-size: 12px; }
.actions { display: flex; gap: 8px; margin-top: 10px; }

.result-panel { margin-top: 14px; border-top: 1px dashed var(--line); padding-top: 12px; }
.result { white-space: pre-wrap; line-height: 1.65; }

.selected-explain {
  border: 1px solid var(--soft-line);
  border-radius: 10px;
  background: color-mix(in srgb, var(--card-bg), transparent 10%);
  padding: 10px;
  max-height: 30vh;
  overflow: auto;
}
.explain-card {
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: 10px;
  margin-bottom: 8px;
  background: var(--card-tint);
}
.explain-card h4 { margin: 0 0 6px; color: color-mix(in srgb, #ffffff 78%, var(--neon) 22%); display: flex; justify-content: space-between; align-items: center; gap: 8px; }
.explain-card p { margin: 0; color: color-mix(in srgb, var(--text) 80%, var(--neon) 20%); line-height: 1.6; font-size: 13px; white-space: pre-wrap; }
.pin-btn {
  background: transparent;
  border: 1px solid var(--line);
  color: var(--chip-text);
  border-radius: 6px;
  padding: 2px 8px;
  font-size: 12px;
}
.mobile-toggle { display: none; }
.theme-picker { min-width: 170px; }

@media (max-width: 1100px) {
  .layout { grid-template-columns: 1fr; }
  .right {
    position: fixed;
    left: 8px;
    right: 8px;
    bottom: 8px;
    top: auto;
    height: 58vh;
    z-index: 20;
    transform: translateY(calc(100% - 52px));
    transition: transform .25s ease;
  }
  .right.open { transform: translateY(0); }
  .mobile-toggle { display: block; position: fixed; right: 12px; bottom: 12px; z-index: 30; }
  .selected-explain { max-height: 18vh; }
}

/* Theme packs (explicit panel tint overrides for obvious global shift) */
body.theme-green {
  --neon:#39ff88; --bg-accent:#0d2b1f; --grad-a:#1fa85c; --grad-b:#52ff9e;
  --panel:#0f2e21; --card-bg:#15402d; --input-bg:#123725;
  --text:#edfff4; --muted:#b7ebcc;
}
body.theme-yellow {
  --neon:#ffe95b; --bg-accent:#2e2608; --grad-a:#c7a500; --grad-b:#ffe15c;
  --panel:#352b0d; --card-bg:#443713; --input-bg:#3d3110;
  --text:#fffbe8; --muted:#e7dca8;
}
body.theme-pink {
  --neon:#ff4ec9; --bg-accent:#2b0d24; --grad-a:#d33ba4; --grad-b:#ff66d3;
  --panel:#34152d; --card-bg:#43203a; --input-bg:#3c1b34;
  --text:#fff0fa; --muted:#e6bad8;
}
body.theme-red {
  --neon:#ff4a4a; --bg-accent:#300c13; --grad-a:#c6283d; --grad-b:#ff5f5f;
  --panel:#341419; --card-bg:#441c22; --input-bg:#3c181d;
  --text:#fff0f2; --muted:#e6b8bf;
}
body.theme-purple {
  --neon:#b16bff; --bg-accent:#201038; --grad-a:#6b3dd1; --grad-b:#bb7cff;
  --panel:#271842; --card-bg:#34215a; --input-bg:#2d1c4f;
  --text:#f4efff; --muted:#cbbbe8;
}
body.theme-orange {
  --neon:#ff9a3d; --bg-accent:#2b1407; --grad-a:#d46b1f; --grad-b:#ffb25e;
  --panel:#341d0f; --card-bg:#452715; --input-bg:#3e2312;
  --text:#fff4eb; --muted:#e8c6ab;
}

@media (max-width: 720px) {
  .config-grid { grid-template-columns: 1fr; }
  .options { grid-template-columns: 1fr; }
}
